# ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å–∏—Å—Ç–µ–º—ã –ø–µ—Ä–µ–≤–æ–¥–∞ - –∑–∞–≤–µ—Ä—à–µ–Ω–∞!

## üéØ –ß—Ç–æ –±—ã–ª–æ —Å–¥–µ–ª–∞–Ω–æ

### 1. **–°–æ–∑–¥–∞–Ω –º–æ–¥—É–ª—å –ø–µ—Ä–µ–≤–æ–¥—á–∏–∫–∞** (`translator.py`)

–õ–µ–≥–∫–æ–≤–µ—Å–Ω—ã–π –ø–µ—Ä–µ–≤–æ–¥—á–∏–∫ —Å **Helsinki-NLP OPUS-MT** –º–æ–¥–µ–ª—è–º–∏:

```python
from translator import get_translator

translator = get_translator()

# RU ‚Üí EN
english = translator.translate_ru_to_en("–ö–∞–∫ —É–≤–µ–ª–∏—á–∏—Ç—å –ø—Ä–∏–±—ã–ª—å?")
# "How to increase profit?"

# EN ‚Üí RU
russian = translator.translate_en_to_ru("How to increase profit?")
# "–ö–∞–∫ —É–≤–µ–ª–∏—á–∏—Ç—å –ø—Ä–∏–±—ã–ª—å?"
```

**–û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏:**
- ‚úÖ –õ–µ–Ω–∏–≤–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –º–æ–¥–µ–ª–µ–π
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Ä–∞–∑–±–∏–µ–Ω–∏–µ –¥–ª–∏–Ω–Ω—ã—Ö —Ç–µ–∫—Å—Ç–æ–≤ –Ω–∞ —á–∞—Å—Ç–∏
- ‚úÖ Singleton pattern (–æ–¥–Ω–∞ –∏–Ω—Å—Ç–∞–Ω—Ü–∏—è –Ω–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ)
- ‚úÖ Fallback –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö
- ‚úÖ CPU-friendly (~0.5s –Ω–∞ 100 —Å–ª–æ–≤)

---

### 2. **–î–æ–±–∞–≤–ª–µ–Ω—ã –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ config** (`config.py`)

```python
# –ù–æ–≤—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:
TRANSLATION_ENABLED = False  # –í–∫–ª—é—á–∏—Ç—å/–≤—ã–∫–ª—é—á–∏—Ç—å –ø–µ—Ä–µ–≤–æ–¥
TRANSLATION_DEVICE = 'cpu'    # 'cpu' –∏–ª–∏ 'cuda'
```

---

### 3. **–ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω –≤ AI Client** (`ai_client.py`)

–°—Ö–µ–º–∞ —Ä–∞–±–æ—Ç—ã —Å –ø–µ—Ä–µ–≤–æ–¥–æ–º:

```
1. –ó–∞–ø—Ä–æ—Å (RU) ‚Üí RAG ‚Üí –ö–æ–Ω—Ç–µ–∫—Å—Ç (RU)
        ‚Üì
2. –ü–µ—Ä–µ–≤–æ–¥—á–∏–∫: Query + Context ‚Üí EN
        ‚Üì
3. Local LLM: –û–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–∞ –∞–Ω–≥–ª–∏–π—Å–∫–æ–º
        ‚Üì
4. –ü–µ—Ä–µ–≤–æ–¥—á–∏–∫: Response ‚Üí RU
        ‚Üì
5. –û—Ç–≤–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é (RU)
```

**–ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ `_generate_local`:**
- –ü–æ–ª—É—á–µ–Ω–∏–µ RAG –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ (–Ω–∞ —Ä—É—Å—Å–∫–æ–º)
- –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π –ø–µ—Ä–µ–≤–æ–¥ –∑–∞–ø—Ä–æ—Å–∞ + –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ ‚Üí EN
- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ system prompt (Russian ‚Üí English)
- –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –æ—Ç–≤–µ—Ç–∞ (–Ω–∞ –∞–Ω–≥–ª–∏–π—Å–∫–æ–º)
- –û–±—Ä–∞—Ç–Ω—ã–π –ø–µ—Ä–µ–≤–æ–¥ ‚Üí RU

---

### 4. **–û–±–Ω–æ–≤–ª–µ–Ω—ã –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏** (`requirements.txt`)

```bash
# Translation (for models trained on English)
sentencepiece>=0.1.99  # Required for OPUS-MT models
sacremoses>=0.0.53     # Required for some translation models
```

**Transformers** —É–∂–µ –±—ã–ª —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –¥–ª—è RAG.

---

### 5. **–°–æ–∑–¥–∞–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**

- `TRANSLATION_GUIDE.md` - –ø–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ (94KB)
  - –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã
  - –°—Ö–µ–º–∞ —Ä–µ—à–µ–Ω–∏—è
  - –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏
  - –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞
  - –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è
  - –û—Ç–ª–∞–¥–∫–∞ –∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏

- `config.env.example` - –ø—Ä–∏–º–µ—Ä –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ —Å –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è–º–∏

---

## üì¶ –£—Å—Ç–∞–Ω–æ–≤–∫–∞

### 1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

```bash
pip install -r requirements.txt
```

### 2. –í–∫–ª—é—á–∏—Ç—å –ø–µ—Ä–µ–≤–æ–¥

–í `config.env`:

```bash
# –í–∫–ª—é—á–∏—Ç—å –ø–µ—Ä–µ–≤–æ–¥ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: false)
TRANSLATION_ENABLED=true

# –£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ (cpu –∏–ª–∏ cuda)
TRANSLATION_DEVICE=cpu
```

### 3. –ü–µ—Ä–≤—ã–π –∑–∞–ø—É—Å–∫

–ú–æ–¥–µ–ª–∏ —Å–∫–∞—á–∞—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –ø–µ—Ä–≤–æ–º –∑–∞–ø—É—Å–∫–µ (~600MB):

```
INFO:__main__:Initializing translator (RU <-> EN)...
INFO:translator:Translator initialized (device: cpu)
INFO:translator:Loading RU->EN model: Helsinki-NLP/opus-mt-ru-en
INFO:translator:RU->EN model loaded successfully
```

---

## üöÄ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤ –±–æ—Ç–µ

–ü—Ä–æ—Å—Ç–æ –≤–∫–ª—é—á–∏—Ç–µ `TRANSLATION_ENABLED=true` - –≤—Å—ë —Ä–∞–±–æ—Ç–∞–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏!

```python
# –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç: "–ö–∞–∫ —É–≤–µ–ª–∏—á–∏—Ç—å –ø—Ä–∏–±—ã–ª—å?"

# 1. –ü–æ–ª—É—á–∞–µ–º RAG –∫–æ–Ω—Ç–µ–∫—Å—Ç (RU)
context = rag.get_context("–ö–∞–∫ —É–≤–µ–ª–∏—á–∏—Ç—å –ø—Ä–∏–±—ã–ª—å?")

# 2. –ü–µ—Ä–µ–≤–æ–¥–∏–º query + context ‚Üí EN
query_en = translator.translate_ru_to_en("–ö–∞–∫ —É–≤–µ–ª–∏—á–∏—Ç—å –ø—Ä–∏–±—ã–ª—å?")
context_en = translator.translate_ru_to_en(context)

# 3. LLM –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –æ—Ç–≤–µ—Ç –Ω–∞ –∞–Ω–≥–ª–∏–π—Å–∫–æ–º
response_en = llm.generate(query_en, context_en)

# 4. –ü–µ—Ä–µ–≤–æ–¥–∏–º –æ–±—Ä–∞—Ç–Ω–æ ‚Üí RU
response_ru = translator.translate_en_to_ru(response_en)

# 5. –û—Ç–ø—Ä–∞–≤–ª—è–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é
# –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–ª—É—á–∞–µ—Ç: "–î–ª—è —É–≤–µ–ª–∏—á–µ–Ω–∏—è –ø—Ä–∏–±—ã–ª–∏ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è..."
```

### –ü—Ä–æ–≥—Ä–∞–º–º–∞—Ç–∏—á–µ—Å–∫–∏

```python
from translator import get_translator

translator = get_translator(device='cpu')

# –ü—Ä–æ—Å—Ç–æ–π –ø–µ—Ä–µ–≤–æ–¥
text_en = translator.translate_ru_to_en("–ü—Ä–∏–≤–µ—Ç, –º–∏—Ä!")
# "Hello, world!"

# –ü–µ—Ä–µ–≤–æ–¥ –¥–ª–∏–Ω–Ω–æ–≥–æ —Ç–µ–∫—Å—Ç–∞ (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ä–∞–∑–±–∏–≤–∞–µ—Ç—Å—è –Ω–∞ —á–∞—Å—Ç–∏)
long_text_ru = "..." * 1000
long_text_en = translator.translate_ru_to_en(long_text_ru)
```

---

## üìä –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

### –°–∫–æ—Ä–æ—Å—Ç—å

**CPU (4 cores, 2.5GHz):**
- 100 —Å–ª–æ–≤: ~0.5s
- 500 —Å–ª–æ–≤: ~2s

**GPU (CUDA):**
- 100 —Å–ª–æ–≤: ~0.1s  (–≤ 5—Ö –±—ã—Å—Ç—Ä–µ–µ)
- 500 —Å–ª–æ–≤: ~0.4s  (–≤ 5—Ö –±—ã—Å—Ç—Ä–µ–µ)

### –ü–∞–º—è—Ç—å

- –ë–µ–∑ –ø–µ—Ä–µ–≤–æ–¥–∞: ~2GB
- –° –ø–µ—Ä–µ–≤–æ–¥–æ–º: ~2.6GB (+600MB –¥–ª—è 2 –º–æ–¥–µ–ª–µ–π)

### –ò—Ç–æ–≥–æ–≤–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞

**Full pipeline** (–∑–∞–ø—Ä–æ—Å ‚Üí RAG ‚Üí –ø–µ—Ä–µ–≤–æ–¥ ‚Üí LLM ‚Üí –ø–µ—Ä–µ–≤–æ–¥):
- –ë–µ–∑ –ø–µ—Ä–µ–≤–æ–¥–∞: ~3-5s
- –° –ø–µ—Ä–µ–≤–æ–¥–æ–º: ~5-10s (+2-5s)

---

## üéØ –ö–æ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å?

### ‚úÖ –í–∫–ª—é—á–∞–π—Ç–µ –ø–µ—Ä–µ–≤–æ–¥ –µ—Å–ª–∏:

1. –ò—Å–ø–æ–ª—å–∑—É–µ—Ç–µ –º–æ–¥–µ–ª—å, –æ–±—É—á–µ–Ω–Ω—É—é –Ω–∞ –∞–Ω–≥–ª–∏–π—Å–∫–æ–º:
   - LLaMA
   - Mistral
   - GPT-2/3
   - BLOOM

2. RAG –¥–æ–∫—É–º–µ–Ω—Ç—ã –Ω–∞ —Ä—É—Å—Å–∫–æ–º

3. –•–æ—Ç–∏—Ç–µ –ª—É—á—à–µ–µ –∫–∞—á–µ—Å—Ç–≤–æ –æ—Ç–≤–µ—Ç–æ–≤

4. –ì–æ—Ç–æ–≤—ã –ø–æ–∂–µ—Ä—Ç–≤–æ–≤–∞—Ç—å 2-5 —Å–µ–∫—É–Ω–¥ –∑–∞–¥–µ—Ä–∂–∫–∏

### ‚ùå –ù–µ –≤–∫–ª—é—á–∞–π—Ç–µ –µ—Å–ª–∏:

1. –ò—Å–ø–æ–ª—å–∑—É–µ—Ç–µ —Ä—É—Å—Å–∫–æ—è–∑—ã—á–Ω—É—é –º–æ–¥–µ–ª—å:
   - Saiga
   - ruGPT
   - YandexGPT

2. –ù–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ RAG

3. –ö—Ä–∏—Ç–∏—á–Ω–∞ —Å–∫–æ—Ä–æ—Å—Ç—å –æ—Ç–∫–ª–∏–∫–∞

4. –û–≥—Ä–∞–Ω–∏—á–µ–Ω–Ω–∞—è –ø–∞–º—è—Ç—å (< 3GB)

---

## üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∏

### 1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∏–º–ø–æ—Ä—Ç

```bash
python -c "from translator import get_translator; print('OK')"
```

### 2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–µ—Ä–µ–≤–æ–¥

```bash
python -c "
from translator import get_translator
t = get_translator()
print(t.translate_ru_to_en('–ü—Ä–∏–≤–µ—Ç, –º–∏—Ä!'))
"
# –î–æ–ª–∂–Ω–æ –≤—ã–≤–µ—Å—Ç–∏: Hello, world!
```

### 3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ –±–æ—Ç–∞

–ü—Ä–∏ –∑–∞–ø—É—Å–∫–µ —Å `TRANSLATION_ENABLED=true`:

```
INFO:__main__:Translation enabled (RU <-> EN)
INFO:__main__:Initializing translator (RU <-> EN)...
INFO:translator:Translator initialized (device: cpu)
INFO:__main__:Translator initialized successfully
```

–ü—Ä–∏ –æ–±—Ä–∞–±–æ—Ç–∫–µ –∑–∞–ø—Ä–æ—Å–∞:

```
INFO:__main__:Translating query and context to English...
INFO:__main__:Translated query: '–ö–∞–∫ –æ—Ç–∫—Ä—ã—Ç—å –ò–ü?' -> 'How to open an IP?'
INFO:__main__:Translated context (1687 chars)
INFO:__main__:Generated response (length: 456)
INFO:__main__:Translating response back to Russian...
INFO:__main__:Translated response back to Russian (523 chars)
```

---

## üìÅ –°–æ–∑–¥–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã

```
project/
‚îú‚îÄ‚îÄ translator.py                    # –ú–æ–¥—É–ª—å –ø–µ—Ä–µ–≤–æ–¥—á–∏–∫–∞ (NEW!)
‚îú‚îÄ‚îÄ ai_client.py                     # –û–±–Ω–æ–≤–ª—ë–Ω —Å –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–µ–π
‚îú‚îÄ‚îÄ config.py                        # –î–æ–±–∞–≤–ª–µ–Ω—ã –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
‚îú‚îÄ‚îÄ requirements.txt                 # –î–æ–±–∞–≤–ª–µ–Ω—ã –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
‚îú‚îÄ‚îÄ config.env.example               # –ü—Ä–∏–º–µ—Ä –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ (NEW!)
‚îú‚îÄ‚îÄ TRANSLATION_GUIDE.md             # –ü–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ (NEW!)
‚îî‚îÄ‚îÄ TRANSLATION_INTEGRATION.md       # –≠—Ç–∞ —Å–≤–æ–¥–∫–∞ (NEW!)
```

---

## üéâ –ì–æ—Ç–æ–≤–æ!

–°–∏—Å—Ç–µ–º–∞ –ø–µ—Ä–µ–≤–æ–¥–∞ –ø–æ–ª–Ω–æ—Å—Ç—å—é –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–∞ –∏ –≥–æ—Ç–æ–≤–∞ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!

**–ß—Ç–æ–±—ã –≤–∫–ª—é—á–∏—Ç—å:**

1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:
```bash
pip install -r requirements.txt
```

2. –í `config.env` –¥–æ–±–∞–≤—å—Ç–µ:
```bash
TRANSLATION_ENABLED=true
TRANSLATION_DEVICE=cpu
```

3. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –±–æ—Ç–∞:
```bash
python main.py
```

**–í—Å—ë! –ë–æ—Ç —Ç–µ–ø–µ—Ä—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–≤–æ–¥–∏—Ç –∑–∞–ø—Ä–æ—Å—ã –¥–ª—è –ª—É—á—à–µ–π —Ä–∞–±–æ—Ç—ã —Å –∞–Ω–≥–ª–æ—è–∑—ã—á–Ω—ã–º–∏ –º–æ–¥–µ–ª—è–º–∏!** üöÄ

---

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã

- `TRANSLATION_GUIDE.md` - –ø–æ–¥—Ä–æ–±–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ
- `config.env.example` - –ø—Ä–∏–º–µ—Ä –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
- –ú–æ–¥–µ–ª–∏: [Helsinki-NLP OPUS-MT](https://huggingface.co/Helsinki-NLP)

**–ù–∞—Å–ª–∞–∂–¥–∞–π—Ç–µ—Å—å —É–ª—É—á—à–µ–Ω–Ω—ã–º –∫–∞—á–µ—Å—Ç–≤–æ–º –æ—Ç–≤–µ—Ç–æ–≤!** ‚ú®

